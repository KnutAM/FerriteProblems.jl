<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · FerriteProblems.jl</title><meta name="title" content="API · FerriteProblems.jl"/><meta property="og:title" content="API · FerriteProblems.jl"/><meta property="twitter:title" content="API · FerriteProblems.jl"/><meta name="description" content="Documentation for FerriteProblems.jl."/><meta property="og:description" content="Documentation for FerriteProblems.jl."/><meta property="twitter:description" content="Documentation for FerriteProblems.jl."/><meta property="og:url" content="https://KnutAM.github.io/FerriteProblems.jl/api/"/><meta property="twitter:url" content="https://KnutAM.github.io/FerriteProblems.jl/api/"/><link rel="canonical" href="https://KnutAM.github.io/FerriteProblems.jl/api/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">FerriteProblems.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>API</a><ul class="internal"><li><a class="tocitem" href="#Main-types"><span>Main types</span></a></li><li><a class="tocitem" href="#Convergence-criteria"><span>Convergence criteria</span></a></li><li><a class="tocitem" href="#Access-functions"><span>Access functions</span></a></li><li><a class="tocitem" href="#Saving-and-loading-data"><span>Saving and loading data</span></a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../examples/plasticity/">Plasticity</a></li><li><a class="tocitem" href="../examples/io/">IO: Saving and loading simulations</a></li><li><a class="tocitem" href="../examples/transient_heat/">Linear Time Dependent Problem</a></li><li><a class="tocitem" href="../examples/incompressible_elasticity/">Incompressible Elasticity</a></li><li><a class="tocitem" href="../examples/porous_media/">Porous media</a></li></ul></li><li><a class="tocitem" href="../internals/">Internals</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/KnutAM/FerriteProblems.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/KnutAM/FerriteProblems.jl/blob/main/docs/src/api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><p>The main types below are exported.  Remaining functions are not exported to avoid polluting the  name space. <em>Tip:</em> To simplify calling the following functions it is possible to write <code>import FerriteProblems as FP</code> as is done in the examples. </p><h2 id="Main-types"><a class="docs-heading-anchor" href="#Main-types">Main types</a><a id="Main-types-1"></a><a class="docs-heading-anchor-permalink" href="#Main-types" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.FerriteProblem" href="#FerriteProblems.FerriteProblem"><code>FerriteProblems.FerriteProblem</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">FerriteProblem(def::FEDefinition, post=nothing, io=nothing; kwargs...)
FerriteProblem(def::FEDefinition, post, savefolder::String; kwargs...)</code></pre><p>Create a FerriteProblem from <a href="#FerriteProblems.FEDefinition"><code>def</code></a>. Postprocessing can be added as <code>post</code>, see <a href="#FESolvers.postprocess!-Tuple{Any, FerriteProblem, Any}"><code>FESolvers.postprocess!</code></a>. File input/output using <a href="#FerriteProblems.FerriteIO"><code>FerriteIO</code></a> can be added with <code>io</code>.  It is also possible to just give the <code>savefolder</code>, i.e. where  to save the output when the default <code>FerriteIO</code> can be used.</p><p>Supported keyword arguments are</p><ul><li><code>autodiffbuffer::Bool</code>: Should <code>FerriteAssembly.jl</code>&#39;s <code>AutoDiffCellBuffer</code> be used?  This will make the assembly faster if automatic differentiation is used, and can also be used  without automatic differentiation (but with a slight extra computational overhead)</li><li><code>threading::Bool</code>: Should threading be used? </li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/FerriteProblems.jl#L28-L43">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.FEDefinition" href="#FerriteProblems.FEDefinition"><code>FerriteProblems.FEDefinition</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">FEDefinition(
    domainspec::Union{DomainSpec,Dict{String,DomainSpec}};
    ch, lh=LoadHandler(dh),
    convergence_criterion=AbsoluteResidual(), 
    initial_conditions=NamedTuple(),
    )</code></pre><p>Create the <code>FEDefinition</code> which can later be used to  create a complete <code>FerriteProblem</code>. <code>domainspec</code> is the <code>FerriteAssembly</code> domain specification.</p><p>In addition, the following keyword arguments can be given</p><ul><li><code>ch</code>: The constraint handler, <code>ConstraintHandler</code> (<code>Ferrite.jl</code>)</li><li><code>lh</code>: The external load handler, <code>LoadHandler</code> (<code>FerriteAssembly.jl</code>)</li><li><code>initial_conditions</code>: NamedTuple with a function <code>f(x)</code> for each field that has a nonzero  initial condition. Used by the <code>Ferrite.jl</code>&#39;s <code>apply_analytical!</code> function. Example: <code>initial_conditions = (u = x -&gt; Vec((x[1]/10, 0.0)), p = x -&gt; -100*x[2])</code>.  For fields not given here, the initial condition is zeros everywhere.  </li><li><code>convergence_criterion</code>: Determines how to calculate the convergence measure including scaling. See <a href="#FerriteProblems.ConvergenceCriterion"><code>ConvergenceCriterion</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/FEDefinition.jl#L1-L22">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.FerriteIO" href="#FerriteProblems.FerriteIO"><code>FerriteProblems.FerriteIO</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">FerriteIO(
    folder::String, def::FEDefinition, post=nothing; 
    def_file=&quot;FEDefinition.jld2&quot;, 
    postfile=&quot;FEPost.jld2&quot;,
    T=Float64, 
    nsteps_per_file=typemax(Int), 
    switchsize=Inf
    )</code></pre><p>Constructor for creating a <code>FerriteIO</code> when simulating. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/IO.jl#L15-L26">source</a></section><section><div><pre><code class="language-julia hljs">FerriteIO(filepath::String)</code></pre><p>Constructor for reading a <code>FerriteIO</code> that was saved during a simulation. The default filename is <code>FerriteIO.jld2</code>, located in the <code>savefolder</code> given  to the <code>FerriteProblem</code> constructor when setting up the simulation. </p><p>Can be called either with the do-block (recommended),</p><pre><code class="language-julia hljs">FerriteIO(filepath) do io
    # Do whatever with io 
end</code></pre><p>or by manually closing,</p><pre><code class="language-julia hljs">io = FerriteIO(filepath)
# Do whatever with io
close(io)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/IO.jl#L51-L70">source</a></section></article><h2 id="Convergence-criteria"><a class="docs-heading-anchor" href="#Convergence-criteria">Convergence criteria</a><a id="Convergence-criteria-1"></a><a class="docs-heading-anchor-permalink" href="#Convergence-criteria" title="Permalink"></a></h2><p>In normal usage, the following convergence criteria can be used</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.ConvergenceCriterion" href="#FerriteProblems.ConvergenceCriterion"><code>FerriteProblems.ConvergenceCriterion</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ConvergenceCriterion</code></pre><p>The abstract type <code>ConvergenceCriterion</code> is the supertype for all  convergence criteria. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/ConvergenceCriteria.jl#L2-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.AbsoluteResidual" href="#FerriteProblems.AbsoluteResidual"><code>FerriteProblems.AbsoluteResidual</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbsoluteResidual()</code></pre><p>The default convergence criterion that calculates the convergence measure as  <code>√(sum([r[i]^2 for i ∈ free dofs])</code> without any scaling. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/ConvergenceCriteria.jl#L43-L48">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.RelativeResidualElementScaling" href="#FerriteProblems.RelativeResidualElementScaling"><code>FerriteProblems.RelativeResidualElementScaling</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">RelativeResidualElementScaling(p, minfactors::Union{AbstractFloat,NamedTuple}=eps())</code></pre><p>Use <code>Ferriteassembly.ElementResidualScaling</code> with the exponent <code>p</code> to calculate the  scaling for each field individually, based on the L2-norm of each cell&#39;s residual.  To avoid issues when all cells have zero residual (e.g. in the first time step), supply <code>minfactors</code> as the minimum scaling factor.  The convergence measure is calculated with the following pseudo-code</p><pre><code class="language-julia hljs">val = 0.0
for field in Ferrite.getfieldnames(dh)
    factor = max(element_residual_scaling[field], minfactors[field])
    dofs = free_field_dofs[field]   # Get the non-constrained dofs for `field`
    val += sum(i-&gt;(r[i]/factor)^2, dofs)
end
return √val</code></pre><p>where the same <code>minfactor</code> is used for all fields if only a scalar value is given. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/ConvergenceCriteria.jl#L55-L73">source</a></section></article><p>To create custom convergence criteria, the following functions  may require overloading. </p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.TolScaling" href="#FerriteProblems.TolScaling"><code>FerriteProblems.TolScaling</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">TolScaling(criterion::ConvergenceCriterion, def::FEDefinition)</code></pre><p>The <code>TolScaling</code> type contains the <code>criterion</code> that determines how to scale the residuals to determine  convergence. The constructor is specialized on <code>typeof(criterion)</code>, creating the following fields:</p><ul><li><code>assemscaling</code>: <code>scaling</code> to be used by <code>FerriteAssembly</code> to give potential scaling contribution based on each element&#39;s residual</li><li><code>buffer</code>: Used to pre-calculate values, such as dof-ranges for each field that is used when calculating the convergence measure. </li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/ConvergenceCriteria.jl#L10-L17">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FESolvers.calculate_convergence_measure" href="#FESolvers.calculate_convergence_measure"><code>FESolvers.calculate_convergence_measure</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">calculate_convergence_measure(problem, Δa, iter) -&gt; AbstractFloat</code></pre><p>Calculate a value to be compared with the tolerance of the nonlinear solver.  A standard case when using <a href="https://github.com/Ferrite-FEM/Ferrite.jl">Ferrite.jl</a> is <code>norm(getresidual(problem)[Ferrite.free_dofs(ch)])</code>  where <code>ch::Ferrite.ConstraintHandler</code>. <code>Δa</code> is the update of the unknowns from  the previous iteration. Note that <code>iter=1</code> implies <code>Δa=0</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FESolvers.jl/blob/e90266071339be296c27e1ab6a80caaf3c59db69/src/problem.jl#L101-L109">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.make_assemscaling" href="#FerriteProblems.make_assemscaling"><code>FerriteProblems.make_assemscaling</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">make_assemscaling(criterion, def)</code></pre><p>Create the <code>scaling</code> for use in <code>FerriteAssembly</code> if required by the given <code>criterion</code>. The default, if not overloaded, returns <code>nothing</code>. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/ConvergenceCriteria.jl#L25-L30">source</a></section></article><h2 id="Access-functions"><a class="docs-heading-anchor" href="#Access-functions">Access functions</a><a id="Access-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Access-functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteAssembly.get_dofhandler" href="#FerriteAssembly.get_dofhandler"><code>FerriteAssembly.get_dofhandler</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_dofhandler(dbs::Dict{String,AbstractDomainBuffer})
get_dofhandler(db::AbstractDomainBuffer)</code></pre><p>Get the dofhandler stored in <code>db</code>. Note that this is the global dofhandler, and not the <code>SubDofHandler</code> that is local to a specific domain.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/8ac371ea7d88667eb61024c665946b0c438ad720/src/DomainBuffers.jl#L7-L13">source</a></section><section><div><pre><code class="language-julia hljs">FerriteProblems.get_dofhandler(p::FerriteProblem)</code></pre><p>Get <code>dh::Ferrite.AbstractDofHandler</code> from the <code>FerriteProblem</code> (Technically overloaded from <code>FerriteAssembly</code>, but accessible via <code>FerriteProblems</code>)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/FEDefinition.jl#L49-L54">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.get_constrainthandler" href="#FerriteProblems.get_constrainthandler"><code>FerriteProblems.get_constrainthandler</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.get_constrainthandler(p::FerriteProblem)</code></pre><p>Get the <code>ConstraintHandler</code> from the <code>FerriteProblem</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/FEDefinition.jl#L57-L61">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.get_loadhandler" href="#FerriteProblems.get_loadhandler"><code>FerriteProblems.get_loadhandler</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.get_loadhandler(p::FerriteProblem)</code></pre><p>Get the <code>LoadHandler</code> from the <code>FerriteProblem</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/FEDefinition.jl#L64-L68">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteAssembly.get_material" href="#FerriteAssembly.get_material"><code>FerriteAssembly.get_material</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_material(dbs::Dict{String,AbstractDomainBuffer}, domain::String)
get_material(db::AbstractDomainBuffer)</code></pre><p>Get the material for the domain represented by <code>db</code> or <code>dbs[domain]</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/8ac371ea7d88667eb61024c665946b0c438ad720/src/DomainBuffers.jl#L48-L53">source</a></section><section><div><pre><code class="language-julia hljs">FerriteProblems.get_material(p::FerriteProblem)
FerriteProblems.get_material(p::FerriteProblem, domain_name::String)</code></pre><p>Get the material in <code>p</code>. For multiple domains, it is necessary to give the <code>domain_name</code> for where to get the material. Note that this is type-unstable and should be avoided in  performance-critical code sections. This function belongs to <code>FerriteAssembly.jl</code>,  but can be accessed via <code>FerriteProblems.get_material</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/FEBuffer.jl#L44-L52">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FESolvers.getjacobian" href="#FESolvers.getjacobian"><code>FESolvers.getjacobian</code></a> — <span class="docstring-category">Function</span></header><section><div><p>getjacobian(problem)</p><p>Return the jacobian <code>drdx</code>, or approximations thereof.</p><p>Must be defined for <code>NewtonSolver</code>, but can also be  defined by the advanced API alternative <a href="@ref"><code>getsystemmatrix</code></a>:  <code>getsystemmatrix(problem, ::NewtonSolver)</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FESolvers.jl/blob/e90266071339be296c27e1ab6a80caaf3c59db69/src/problem.jl#L15-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FESolvers.getunknowns" href="#FESolvers.getunknowns"><code>FESolvers.getunknowns</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getunknowns(problem)</code></pre><p>Return the current vector of unknown values</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FESolvers.jl/blob/e90266071339be296c27e1ab6a80caaf3c59db69/src/problem.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FESolvers.getresidual" href="#FESolvers.getresidual"><code>FESolvers.getresidual</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">getresidual(problem)</code></pre><p>Return the current residual vector of the problem</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FESolvers.jl/blob/e90266071339be296c27e1ab6a80caaf3c59db69/src/problem.jl#L8-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.get_external_force" href="#FerriteProblems.get_external_force"><code>FerriteProblems.get_external_force</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getneumannforce(p::FerriteProblem)</code></pre><p>Get the current external force vector caused by  Neumann boundary conditions. Note that this vector  does not include external forces added during the  cell assembly; only forces added with the <code>NeumannHandler</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/FEBuffer.jl#L96-L103">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.get_old_unknowns" href="#FerriteProblems.get_old_unknowns"><code>FerriteProblems.get_old_unknowns</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.get_old_unknowns(p::FerriteProblem)</code></pre><p>Get the vector of unknowns from the previously converged step</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/FEBuffer.jl#L117-L121">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteAssembly.get_state" href="#FerriteAssembly.get_state"><code>FerriteAssembly.get_state</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_state(dbs::Dict{String,AbstractDomainBuffer}, domain::String)
get_state(db::Union{AbstractDomainBuffer,Dict{String,AbstractDomainBuffer}})</code></pre><p>Get the <code>states::Dict{Int,S}</code>, where <code>S</code> type of the state for each entity in the domain, stored in the <code>db</code> or <code>dbs[domain]</code>. If no <code>domain</code> is given for multiple domains, a  Dict{String} is returned with state variables for each domain</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/8ac371ea7d88667eb61024c665946b0c438ad720/src/DomainBuffers.jl#L26-L33">source</a></section><section><div><pre><code class="language-julia hljs">FerriteProblems.get_state(p::FerriteProblem)</code></pre><p>Get the current state variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/FEBuffer.jl#L132-L136">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteAssembly.get_old_state" href="#FerriteAssembly.get_old_state"><code>FerriteAssembly.get_old_state</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_old_state(itembuffer::AbstractCellBuffer)</code></pre><p>Get the old state variables for the cell. Currently only available for cells and not for faces. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteAssembly.jl/blob/8ac371ea7d88667eb61024c665946b0c438ad720/src/ItemBuffers/AbstractItemBuffer.jl#L19-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.get_time" href="#FerriteProblems.get_time"><code>FerriteProblems.get_time</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.get_time(p::FerriteProblem)</code></pre><p>Get the current time</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/FEBuffer.jl#L147-L151">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.get_old_time" href="#FerriteProblems.get_old_time"><code>FerriteProblems.get_old_time</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getoldtime(p::FerriteProblem)</code></pre><p>Get time of the previous converged step</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/FEBuffer.jl#L154-L158">source</a></section></article><h2 id="Saving-and-loading-data"><a class="docs-heading-anchor" href="#Saving-and-loading-data">Saving and loading data</a><a id="Saving-and-loading-data-1"></a><a class="docs-heading-anchor-permalink" href="#Saving-and-loading-data" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FESolvers.handle_notconverged!-Tuple{Any, FerriteProblem, Any}" href="#FESolvers.handle_notconverged!-Tuple{Any, FerriteProblem, Any}"><code>FESolvers.handle_notconverged!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">FESolvers.handle_notconverged!(post, p::FerriteProblem, solver)</code></pre><p>Optional overload which is called when the problem doesn&#39;t converge for the current attempt.  Allows for example to modify the problem or add special postprocessing to investigate convergence issues. </p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>If the problem is modified, and an adaptive time stepper is used, the adaptive time stepper  will still consider the problem as not converged, and adapt the time-stepping accordingly. Currently, there is no interface to prevent this, and usage with a fixed time stepping might make more sense. However, by modifying the <code>solver</code>&#39;s state, it is possible to trick the  adaptive time stepper to not modify the time step, but this requires using non-stable and non-public API.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/FerriteProblems.jl#L199-L211">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FESolvers.postprocess!-Tuple{Any, FerriteProblem, Any}" href="#FESolvers.postprocess!-Tuple{Any, FerriteProblem, Any}"><code>FESolvers.postprocess!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">FESolvers.postprocess!(p::FerriteProblem, solver)</code></pre><p>When <code>FESolvers</code> call this function for <code>p::FerriteProblem</code>,  the following function</p><pre><code class="nohighlight hljs">FESolvers.postprocess!(post, p::FerriteProblem, solver)</code></pre><p>is called where <code>post=p.post</code> (unless you define a different override).  This allows you to easily define the dispatch on your postprocessing  type as <code>FESolvers.postprocess!(post::MyPostType, p, solver)</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/FerriteProblems.jl#L57-L68">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.close_postprocessing" href="#FerriteProblems.close_postprocessing"><code>FerriteProblems.close_postprocessing</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">close_postprocessing(post::MyPostType, p::FerriteProblem)</code></pre><p>This function is called to close any open files manually created during  the postprocessing with the custom postprocessing type <code>MyPostType</code>.  Note that the file streams in p.io::FerriteIO are  automatically closed and don&#39;t require any special handling.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/FerriteProblems.jl#L116-L123">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.addstep!" href="#FerriteProblems.addstep!"><code>FerriteProblems.addstep!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.addstep!(io::FerriteIO, p::FerriteProblem)</code></pre><p>Add a new step to be saved by <code>io</code> at the time <code>gettime(p)</code> Must be called before adding any new data</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/IO.jl#L149-L154">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.gettimedata" href="#FerriteProblems.gettimedata"><code>FerriteProblems.gettimedata</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">gettimedata(io::FerriteIO)
gettimedata(io::FerriteIO, step)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/IO.jl#L282-L285">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.savedofdata!" href="#FerriteProblems.savedofdata!"><code>FerriteProblems.savedofdata!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.savedofdata!(io::FerriteIO, vals, dt_order=0, field=&quot;dof&quot;)</code></pre><p>Save data pertaining to each degree of freedom. Use a different field than <code>&quot;dof&quot;</code>` to save data located at each dof,  but not the actual dof values (e.g. the residual vector)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/IO.jl#L185-L191">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.getdofdata" href="#FerriteProblems.getdofdata"><code>FerriteProblems.getdofdata</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getdofdata(io::FerriteIO, step, field=&quot;dof&quot;; dt_order=0)</code></pre><p>Get the data saved by <a href="#FerriteProblems.savedofdata!"><code>FerriteProblems.savedofdata!</code></a> in <code>step</code> for <code>field</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/IO.jl#L300-L304">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.savenodedata!" href="#FerriteProblems.savenodedata!"><code>FerriteProblems.savenodedata!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.savenodedata!(io::FerriteIO, vals, field, dt_order=0)</code></pre><p>Save data located at each node. By convention this should be indexed by the node numbers in the grid. (E.g. a <code>Vector</code> for all nodes or a <code>Dict{Int}</code> with keys the node numbers)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/IO.jl#L196-L202">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.getnodedata" href="#FerriteProblems.getnodedata"><code>FerriteProblems.getnodedata</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getnodedata(io::FerriteIO, step, field; dt_order=0)</code></pre><p>Get the data saved by <a href="#FerriteProblems.savenodedata!"><code>FerriteProblems.savenodedata!</code></a> in <code>step</code> for <code>field</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/IO.jl#L309-L313">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.savecelldata!" href="#FerriteProblems.savecelldata!"><code>FerriteProblems.savecelldata!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.savecelldata!(io::FerriteIO, vals, field, dt_order=0)</code></pre><p>Save data for each cell.  By convention this should be indexed by the cell numbers in the grid. (E.g. a <code>Vector</code> for all cells or a <code>Dict{Int}</code> with keys the cell indices)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/IO.jl#L207-L213">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.getcelldata" href="#FerriteProblems.getcelldata"><code>FerriteProblems.getcelldata</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getcelldata(io::FerriteIO, step, field; dt_order=0)</code></pre><p>Get the data saved by <a href="#FerriteProblems.savecelldata!"><code>FerriteProblems.savecelldata!</code></a> in <code>step</code> for <code>field</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/IO.jl#L318-L322">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.saveipdata!" href="#FerriteProblems.saveipdata!"><code>FerriteProblems.saveipdata!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.saveipdata!(io::FerriteIO, vals, field, dt_order=0)</code></pre><p>Save data for each integration point in cells in the grid.  By convention the data for each cell should be indexed by the cell numbers in the grid. (E.g. a <code>Vector</code> for all cells or a <code>Dict{Int}</code> with keys the cell indices) Note that it is on the user to know how the integration points are numbered,  i.e. which <code>QuadratureRule</code> that was used. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/IO.jl#L218-L226">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.getipdata" href="#FerriteProblems.getipdata"><code>FerriteProblems.getipdata</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getipdata(io::FerriteIO, step, field; dt_order=0)</code></pre><p>Get the data saved by <a href="#FerriteProblems.saveipdata!"><code>FerriteProblems.saveipdata!</code></a> in <code>step</code> for <code>field</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/IO.jl#L327-L331">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.saveglobaldata!" href="#FerriteProblems.saveglobaldata!"><code>FerriteProblems.saveglobaldata!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.saveglobaldata!(io::FerriteIO, vals, field, dt_order=0)</code></pre><p>Save data that is global to the entire simulation, i.e. global quantites such as  reaction forces, total dissipation, etc. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/IO.jl#L231-L236">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.getglobaldata" href="#FerriteProblems.getglobaldata"><code>FerriteProblems.getglobaldata</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getglobaldata(io::FerriteIO, step, field; dt_order=0)</code></pre><p>Get the data saved by <a href="#FerriteProblems.saveglobaldata!"><code>FerriteProblems.saveglobaldata!</code></a> in <code>step</code> for <code>field</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/IO.jl#L336-L340">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.getdef" href="#FerriteProblems.getdef"><code>FerriteProblems.getdef</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getdef(io::FerriteIO)</code></pre><p>Load the <code>FEDefinition</code> from the results saved by <code>io</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/IO.jl#L359-L363">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="FerriteProblems.getpost" href="#FerriteProblems.getpost"><code>FerriteProblems.getpost</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getpost(io::FerriteIO)</code></pre><p>Load the user defined <code>post</code> from the results saved by <code>io</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/5e166189646792b6aee19438b68bd5d4735040d3/src/IO.jl#L369-L373">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../examples/plasticity/">Plasticity »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.4.0 on <span class="colophon-date" title="Saturday 20 April 2024 13:26">Saturday 20 April 2024</span>. Using Julia version 1.10.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
