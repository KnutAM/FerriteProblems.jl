<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · FerriteProblems.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://KnutAM.github.io/FerriteProblems.jl/api/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">FerriteProblems.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>API</a><ul class="internal"><li><a class="tocitem" href="#Main-types"><span>Main types</span></a></li><li><a class="tocitem" href="#Setting-up-simulation"><span>Setting up simulation</span></a></li><li><a class="tocitem" href="#Convergence-criteria"><span>Convergence criteria</span></a></li><li><a class="tocitem" href="#Access-functions"><span>Access functions</span></a></li><li><a class="tocitem" href="#Saving-and-loading-data"><span>Saving and loading data</span></a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../examples/plasticity/">Plasticity</a></li><li><a class="tocitem" href="../examples/transient_heat/">Linear Time Dependent Problem</a></li><li><a class="tocitem" href="../examples/incompressible_elasticity/">Incompressible Elasticity</a></li><li><a class="tocitem" href="../examples/porous_media/">Porous media</a></li></ul></li><li><a class="tocitem" href="../internals/">Internals</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/KnutAM/FerriteProblems.jl/blob/main/docs/src/api.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><p>The main types below are exported.  Remaining functions are not exported to avoid polluting the  name space. <em>Tip:</em> To simplify calling the following functions it is possible to write <code>import FerriteProblems as FP</code> as is done in the examples. </p><h2 id="Main-types"><a class="docs-heading-anchor" href="#Main-types">Main types</a><a id="Main-types-1"></a><a class="docs-heading-anchor-permalink" href="#Main-types" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.FerriteProblem" href="#FerriteProblems.FerriteProblem"><code>FerriteProblems.FerriteProblem</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">FerriteProblem(def::FEDefinition, post, buf::FEBuffer, io::[FerriteIO])</code></pre><p>The main problem type that holds all variables to solve a particular problem  using <code>FESolvers</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/FerriteProblems.jl#L20-L25">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.FEDefinition" href="#FerriteProblems.FEDefinition"><code>FerriteProblems.FEDefinition</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">FEDefinition(dh, ch, nh, cv, m, bl, initialstate, ic)
FEDefinition(;
    dh, ch, cv, m,
    nh=NeumannHandler(dh), bl=nothing, ic=(), 
    initialstate=_create_states(dh,m,cv,ic),
    cc=AbsoluteResidual(), colors=nothing,
    )</code></pre><p>The definition of the FE-problem, this data describes the finite  element problem as a function of time. For how long to run and how  to step through time is typically done by <code>FESolvers.jl</code>. </p><p><strong>Fields/inputs</strong></p><p>See more information below for items marked with *</p><ul><li><code>dh</code>: The dof handler, <code>Union{DofHandler,MixedDofHandler}</code> (<code>Ferrite.jl</code>)</li><li><code>ch</code>: The constraint handler, <code>ConstraintHandler</code> (<code>Ferrite.jl</code>)</li><li><code>nh</code>: The neumann bc handler, <code>NeumannHandler</code> (<code>FerriteNeumann.jl</code>)</li><li><code>cv</code>: The cellvalues, e.g. <code>CellValues</code> (*)</li><li><code>m</code>: The material definition, user defined type - passed into element. (*)</li><li><code>bl</code>: Source term/body load, user defined type - available from the element routine (*)</li><li><code>ic</code>: Initial conditions. NamedTuple with a function <code>f(x)</code> for each field that has a nonzero  initial condition. Used by the <code>Ferrite.jl</code>&#39;s <code>apply_analytical!</code> function  (included here if Ferrite version too old).</li><li><code>initialstate</code>: The initial state variables for each cell in the grid. By default, this is  automatically created by <code>FerriteAssembly.create_states</code> with customization provided by overloading <code>FerriteAssembly.create_cell_state</code> and is not necessary to supply here. </li><li><code>cc::ConvergenceCriterion</code>: Determines how to calculate the convergence measure including scaling</li><li><code>colors</code>: Supply to use threaded assembly, can be created by <code>Ferrite.create_coloring</code></li></ul><p><strong><code>MixedDofHandler</code></strong></p><p>When the <code>MixedDofHandler</code> is used, we have an outer loop over each of its <code>FieldHandler</code>s. Therefore, <code>cv</code>, <code>m</code>, and <code>bl</code> may be provided for each of these fields by providing them as  a tuple. Otherwise, they are duplicated for each field (by reference)</p><p><code>initialstate</code> must be a tuple containing <code>Dict{Int}</code> with states for the cells in the relevant  <code>FieldHandler</code>&#39;s cellset. </p><p><strong>Multiple <code>CellValue</code>s for each element</strong> In coupled problems, each element might require multiple <code>CellValue</code>s.  If the same should be used for all fields (even if only one <code>FieldHandler</code>),  a <code>NamedTuple</code> is the easiest (the alternative is a <code>Tuple</code> of <code>Tuple</code>s).  If different multiple <code>CellValues</code> should be used for each field, then pass as  <code>Tuple</code> of <code>NamedTuple</code>/<code>Tuple</code></p><p><strong>Multiple materials</strong></p><p><strong>Note</strong>: <em>The following setup is not needed if you have one material</em> <em>for each <code>FieldHandler</code> when using a <code>MixedDofHandler</code></em></p><p>If you want to have different materials on different parts of the grid,  you should first define those cellsets, and then define each material  as a value of <code>m::Dict{String}</code> with the name of the cellset as key. </p><p>You may do the same for <code>bl</code> and <code>cv</code>.  Otherwise, the same values will be used for every cellset. </p><p><strong>Combine with <code>MixedDofHandler</code></strong>:  Follow the required input for <code>MixedDofHandler</code>,  but wrap items (at least the material and <code>initialstate</code>) in <code>Dict</code>s as described above</p><p><strong>State variables</strong>:  <code>initialstate::Dict{String}</code> must mirror the datastructure of <code>m::Dict{String}</code>: For each <code>key</code> in <code>m::Dict{String}</code>, <code>initialstate[key]</code> holds a collection of states  for the cells in <code>getcellset(dh,key)</code>.</p><p>If <code>MixedDofHandler</code>, then <code>initialstate[key]::NTuple{N,&lt;:Dict{Int}}</code>,  and if <code>DofHandler</code>, then <code>initialstate[key]::Dict{Int}</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/FEDefinition.jl#L1-L70">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.FerriteIO" href="#FerriteProblems.FerriteIO"><code>FerriteProblems.FerriteIO</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">FerriteIO(
    folder::String, def::FEDefinition, post=nothing; 
    def_file=&quot;FEDefinition.jld2&quot;, 
    postfile=&quot;FEPost.jld2&quot;,
    T=Float64, 
    nsteps_per_file=typemax(Int), 
    switchsize=Inf
    )</code></pre><p>Constructor for creating a <code>FerriteIO</code> when simulating. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/IO.jl#L16-L27">source</a></section><section><div><pre><code class="nohighlight hljs">FerriteIO(filename::String)</code></pre><p>Constructor for reading a <code>FerriteIO</code> that was saved during a simulation</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/IO.jl#L54-L58">source</a></section></article><h2 id="Setting-up-simulation"><a class="docs-heading-anchor" href="#Setting-up-simulation">Setting up simulation</a><a id="Setting-up-simulation-1"></a><a class="docs-heading-anchor-permalink" href="#Setting-up-simulation" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.cellbuffertype" href="#FerriteProblems.cellbuffertype"><code>FerriteProblems.cellbuffertype</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">cellbuffertype(def)</code></pre><p>By default, <code>cellbuffertype(::Any) = CellBuffer</code>.  However, if you are using the automatic differentiation,  much better assembly speed can be achieved by defining</p><pre><code class="nohighlight hljs">FerriteProblems.cellbuffertype(::FEDefinition) = AutoDiffCellBuffer</code></pre><p>In this case, any defined <code>element_routine!</code> should  use <code>getCellBuffer(buffer)</code> to get a <code>CellBuffer</code> instead  of <code>AutoDiffCellBuffer</code>.  This is not necessary in <code>element_residual!</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/FEBuffer.jl#L21-L34">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.allocate_material_cache" href="#FerriteProblems.allocate_material_cache"><code>FerriteProblems.allocate_material_cache</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.allocate_material_cache(material, cellvalues)</code></pre><p>In case the material requires a cache to be available during the element routine, this function can be overloaded for the specific material to define such a cache to be included in the <code>FerriteAssembly.CellBuffer</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/FEDefinition.jl#L149-L155">source</a></section></article><h2 id="Convergence-criteria"><a class="docs-heading-anchor" href="#Convergence-criteria">Convergence criteria</a><a id="Convergence-criteria-1"></a><a class="docs-heading-anchor-permalink" href="#Convergence-criteria" title="Permalink"></a></h2><p>In normal usage, the following convergence criteria can be used</p><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.ConvergenceCriterion" href="#FerriteProblems.ConvergenceCriterion"><code>FerriteProblems.ConvergenceCriterion</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ConvergenceCriterion</code></pre><p>The abstract type <code>ConvergenceCriterion</code> is the supertype for all  convergence criteria. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/ConvergenceCriteria.jl#L2-L7">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.AbsoluteResidual" href="#FerriteProblems.AbsoluteResidual"><code>FerriteProblems.AbsoluteResidual</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbsoluteResidual()</code></pre><p>The default convergence criterion that calculates the convergence measure as  <code>√(sum([r[i]^2 for i ∈ free dofs])</code> without any scaling. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/ConvergenceCriteria.jl#L53-L58">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.RelativeResidualElementScaling" href="#FerriteProblems.RelativeResidualElementScaling"><code>FerriteProblems.RelativeResidualElementScaling</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">RelativeResidualElementScaling(p, minfactors::Union{AbstractFloat,NamedTuple}=eps())</code></pre><p>Use <code>Ferriteassembly.ElementResidualScaling</code> with the exponent <code>p</code> to calculate the  scaling for each field individually, based on the L2-norm of each cell&#39;s residual.  To avoid issues when all cells have zero residual (e.g. in the first time step), supply <code>minfactors</code> as the minimum scaling factor.  The convergence measure is calculated with the following pseudo-code</p><pre><code class="language-julia hljs">val = 0.0
for field in Ferrite.getfieldnames(dh)
    factor = max(element_residual_scaling[field], minfactors[field])
    dofs = free_field_dofs[field]   # Get the non-constrained dofs for `field`
    val += sum(i-&gt;(r[i]/factor)^2, dofs)
end
return √val</code></pre><p>where the same <code>minfactor</code> is used for all fields if only a scalar value is given. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/ConvergenceCriteria.jl#L65-L83">source</a></section></article><p>To create custom convergence criteria, the following functions  may require overloading. </p><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.TolScaling" href="#FerriteProblems.TolScaling"><code>FerriteProblems.TolScaling</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">TolScaling(criterion::ConvergenceCriterion, def::FEDefinition)</code></pre><p>The <code>TolScaling</code> type contains the <code>criterion</code> that determines how to scale the residuals to determine  convergence. The constructor is specialized on <code>typeof(criterion)</code>, creating the following fields:</p><ul><li><code>assemscaling</code>: Used in <code>FerriteAssembly.doassemble!</code> to give potential scaling contribution based on each element&#39;s residual</li><li><code>buffer</code>: Used to pre-calculate values, such as dof-ranges for each field that is used when calculating the convergence measure. </li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/ConvergenceCriteria.jl#L10-L17">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.make_assemscaling" href="#FerriteProblems.make_assemscaling"><code>FerriteProblems.make_assemscaling</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">make_assemscaling(criterion, def, threaded::Val{false})</code></pre><p>Create the actual assemscaling for the given <code>criterion</code>.</p><pre><code class="nohighlight hljs">make_assemscaling(criterion, def, threaded::Val{true})</code></pre><p>If <code>threaded::Val{true}</code>, then call <code>make_assemscaling(criterion, def, ::Val{false})</code>  for each thread to support threaded assembly. Note that the function has a definition  <code>make_assemscaling(criterion,def)=make_assemscaling(criterion,def,dothreaded(def))</code> to simplify calling it. If required, a <code>criterion</code> should overload <code>make_assemscaling(criterion,def,::Val{false})</code>. The default, if not overloaded, returns <code>nothing</code>.  That suffices if nothing needs to be calculated for each cell during assembly. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/ConvergenceCriteria.jl#L25-L38">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FESolvers.calculate_convergence_measure" href="#FESolvers.calculate_convergence_measure"><code>FESolvers.calculate_convergence_measure</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FESolvers.calculate_convergence_measure(::ConvergenceCriterion, scaling::TolScaling, r::Vector, Δa, iter, p::FerriteProblem)</code></pre><p>Specialize this function for each <code>ConvergenceCriterion</code>. Note this function is called via the definition</p><pre><code class="nohighlight hljs">calculate_convergence_measure(ts::TolScaling, args...) = calculate_convergence_measure(ts.criterion, ts, args...)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/ConvergenceCriteria.jl#L43-L50">source</a></section></article><h2 id="Access-functions"><a class="docs-heading-anchor" href="#Access-functions">Access functions</a><a id="Access-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Access-functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.getdh" href="#FerriteProblems.getdh"><code>FerriteProblems.getdh</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getdh(p::FerriteProblem)</code></pre><p>Get <code>dh::Ferrite.AbstractDofHandler</code> from the <code>FerriteProblem</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/FEDefinition.jl#L103-L107">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.getch" href="#FerriteProblems.getch"><code>FerriteProblems.getch</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getch(p::FerriteProblem)</code></pre><p>Get the <code>ConstraintHandler</code> from the <code>FerriteProblem</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/FEDefinition.jl#L110-L114">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.getnh" href="#FerriteProblems.getnh"><code>FerriteProblems.getnh</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getnh(p::FerriteProblem)</code></pre><p>Get the <code>NeumannHandler</code> from the <code>FerriteProblem</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/FEDefinition.jl#L117-L121">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.getcv" href="#FerriteProblems.getcv"><code>FerriteProblems.getcv</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getcv(p::FerriteProblem)</code></pre><p>Get the cell values from the <code>FerriteProblem</code>.  Note that this could also be a <code>Tuple</code> or <code>NamedTuple</code> depending on  what was initially given to <code>FEDefinition</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/FEDefinition.jl#L124-L130">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.getmaterial" href="#FerriteProblems.getmaterial"><code>FerriteProblems.getmaterial</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getmaterial(p::FerriteProblem)</code></pre><p>Get the material from the <code>FerriteProblem</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/FEDefinition.jl#L133-L137">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.getbodyload" href="#FerriteProblems.getbodyload"><code>FerriteProblems.getbodyload</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getbodyload(p::FerriteProblem)</code></pre><p>Get the bodyload given to the <code>FerriteProblem</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/FEDefinition.jl#L140-L144">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FESolvers.getjacobian" href="#FESolvers.getjacobian"><code>FESolvers.getjacobian</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getjacobian(p::FerriteProblem)</code></pre><p>Get the current jacobian matrix from <code>p</code>.  Note that this function belongs to <code>FESolvers.jl</code>, but can be accessed via <code>FerriteProblems.getjacobian</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/FEBuffer.jl#L58-L64">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FESolvers.getunknowns" href="#FESolvers.getunknowns"><code>FESolvers.getunknowns</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getunknowns(p::FerriteProblem)</code></pre><p>Get the current vector of unknowns from <code>p</code>.  Note that this function belongs to <code>FESolvers.jl</code>, but can be accessed via <code>FerriteProblems.getunknowns</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/FEBuffer.jl#L67-L73">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FESolvers.getresidual" href="#FESolvers.getresidual"><code>FESolvers.getresidual</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getresidual(p::FerriteProblem)</code></pre><p>Get the current residual vector from <code>p</code>.  Note that this function belongs to <code>FESolvers.jl</code>, but can be accessed via <code>FerriteProblems.getresidual</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/FEBuffer.jl#L76-L82">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.getneumannforce" href="#FerriteProblems.getneumannforce"><code>FerriteProblems.getneumannforce</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getneumannforce(p::FerriteProblem)</code></pre><p>Get the current external force vector caused by  Neumann boundary conditions. Note that this vector  does not include external forces added during the  cell assembly; only forces added with the <code>NeumannHandler</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/FEBuffer.jl#L85-L92">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.getoldunknowns" href="#FerriteProblems.getoldunknowns"><code>FerriteProblems.getoldunknowns</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getoldunknowns(p::FerriteProblem)</code></pre><p>Get the vector of unknowns from the previously converged step</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/FEBuffer.jl#L113-L117">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.getstate" href="#FerriteProblems.getstate"><code>FerriteProblems.getstate</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getstate(p::FerriteProblem)</code></pre><p>Get the current state variables</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/FEBuffer.jl#L128-L132">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.getoldstate" href="#FerriteProblems.getoldstate"><code>FerriteProblems.getoldstate</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getoldstate(p::FerriteProblem)</code></pre><p>Get the state variables from the previously converged step</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/FEBuffer.jl#L135-L139">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.gettime" href="#FerriteProblems.gettime"><code>FerriteProblems.gettime</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.gettime(p::FerriteProblem)</code></pre><p>Get the current time</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/FEBuffer.jl#L181-L185">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.getoldtime" href="#FerriteProblems.getoldtime"><code>FerriteProblems.getoldtime</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getoldtime(p::FerriteProblem)</code></pre><p>Get time of the previous converged step</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/FEBuffer.jl#L188-L192">source</a></section></article><h2 id="Saving-and-loading-data"><a class="docs-heading-anchor" href="#Saving-and-loading-data">Saving and loading data</a><a id="Saving-and-loading-data-1"></a><a class="docs-heading-anchor-permalink" href="#Saving-and-loading-data" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="FESolvers.postprocess!" href="#FESolvers.postprocess!"><code>FESolvers.postprocess!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FESolvers.postprocess!(p::FerriteProblem, step, solver)</code></pre><p>When <code>FESolvers</code> call this function for <code>p::FerriteProblem</code>,  the following function</p><pre><code class="nohighlight hljs">FESolvers.postprocess!(post, p::FerriteProblem, step, solver)</code></pre><p>is called where <code>post=p.post</code> (unless you define a different override).  This allows you to easily define the dispatch on your postprocessing  type as <code>FESolvers.postprocess!(post::MyPostType, p, step, solver)</code> Note that the <code>solver</code> input argument is required, but can be  accounted for by defining, e.g.  <code>FESolvers.postprocess!(post::MyPostType, p, step, args...)</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/FerriteProblems.jl#L58-L72">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.close_postprocessing" href="#FerriteProblems.close_postprocessing"><code>FerriteProblems.close_postprocessing</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">close_postprocessing(post::MyPostType, p::FerriteProblem)</code></pre><p>This function is called to close any open files manually created during  the postprocessing with the custom postprocessing type <code>MyPostType</code>.  Note that the file streams in p.io::FerriteIO are  automatically closed and don&#39;t require any special handling.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/FerriteProblems.jl#L103-L110">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.addstep!" href="#FerriteProblems.addstep!"><code>FerriteProblems.addstep!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.addstep!(io::FerriteIO, p::FerriteProblem)</code></pre><p>Add a new step to be saved by <code>io</code> at the time <code>gettime(p)</code> Must be called before adding any new data</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/IO.jl#L126-L131">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.gettimedata" href="#FerriteProblems.gettimedata"><code>FerriteProblems.gettimedata</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">gettimedata(io::FerriteIO)
gettimedata(io::FerriteIO, step)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/IO.jl#L259-L262">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.savedofdata!" href="#FerriteProblems.savedofdata!"><code>FerriteProblems.savedofdata!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.savedofdata!(io::FerriteIO, vals, dt_order=0, field=&quot;dof&quot;)</code></pre><p>Save data pertaining to each degree of freedom. Use a different field than <code>&quot;dof&quot;</code>` to save data located at each dof,  but not the actual dof values (e.g. the residual vector)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/IO.jl#L162-L168">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.getdofdata" href="#FerriteProblems.getdofdata"><code>FerriteProblems.getdofdata</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getdofdata(io::FerriteIO, step, field=&quot;dof&quot;; dt_order=0)</code></pre><p>Get the data saved by <a href="#FerriteProblems.savedofdata!"><code>FerriteProblems.savedofdata!</code></a> in <code>step</code> for <code>field</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/IO.jl#L277-L281">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.savenodedata!" href="#FerriteProblems.savenodedata!"><code>FerriteProblems.savenodedata!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.savenodedata!(io::FerriteIO, vals, field, dt_order=0)</code></pre><p>Save data located at each node. By convention this should be indexed by the node numbers in the grid. (E.g. a <code>Vector</code> for all nodes or a <code>Dict{Int}</code> with keys the node numbers)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/IO.jl#L173-L179">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.getnodedata" href="#FerriteProblems.getnodedata"><code>FerriteProblems.getnodedata</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getnodedata(io::FerriteIO, step, field; dt_order=0)</code></pre><p>Get the data saved by <a href="#FerriteProblems.savenodedata!"><code>FerriteProblems.savenodedata!</code></a> in <code>step</code> for <code>field</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/IO.jl#L286-L290">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.savecelldata!" href="#FerriteProblems.savecelldata!"><code>FerriteProblems.savecelldata!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.savecelldata!(io::FerriteIO, vals, field, dt_order=0)</code></pre><p>Save data for each cell.  By convention this should be indexed by the cell numbers in the grid. (E.g. a <code>Vector</code> for all cells or a <code>Dict{Int}</code> with keys the cell indices)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/IO.jl#L184-L190">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.getcelldata" href="#FerriteProblems.getcelldata"><code>FerriteProblems.getcelldata</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getcelldata(io::FerriteIO, step, field; dt_order=0)</code></pre><p>Get the data saved by <a href="#FerriteProblems.savecelldata!"><code>FerriteProblems.savecelldata!</code></a> in <code>step</code> for <code>field</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/IO.jl#L295-L299">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.saveipdata!" href="#FerriteProblems.saveipdata!"><code>FerriteProblems.saveipdata!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.saveipdata!(io::FerriteIO, vals, field, dt_order=0)</code></pre><p>Save data for each integration point in cells in the grid.  By convention the data for each cell should be indexed by the cell numbers in the grid. (E.g. a <code>Vector</code> for all cells or a <code>Dict{Int}</code> with keys the cell indices) Note that it is on the user to know how the integration points are numbered,  i.e. which <code>QuadratureRule</code> that was used. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/IO.jl#L195-L203">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.getipdata" href="#FerriteProblems.getipdata"><code>FerriteProblems.getipdata</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getipdata(io::FerriteIO, step, field; dt_order=0)</code></pre><p>Get the data saved by <a href="#FerriteProblems.saveipdata!"><code>FerriteProblems.saveipdata!</code></a> in <code>step</code> for <code>field</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/IO.jl#L304-L308">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.saveglobaldata!" href="#FerriteProblems.saveglobaldata!"><code>FerriteProblems.saveglobaldata!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.saveglobaldata!(io::FerriteIO, vals, field, dt_order=0)</code></pre><p>Save data that is global to the entire simulation, i.e. global quantites such as  reaction forces, total dissipation, etc. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/IO.jl#L208-L213">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.getglobaldata" href="#FerriteProblems.getglobaldata"><code>FerriteProblems.getglobaldata</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getglobaldata(io::FerriteIO, step, field; dt_order=0)</code></pre><p>Get the data saved by <a href="#FerriteProblems.saveglobaldata!"><code>FerriteProblems.saveglobaldata!</code></a> in <code>step</code> for <code>field</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/IO.jl#L313-L317">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.getdef" href="#FerriteProblems.getdef"><code>FerriteProblems.getdef</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getdef(io::FerriteIO)</code></pre><p>Load the <code>FEDefinition</code> from the results saved by <code>io</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/IO.jl#L336-L340">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="FerriteProblems.getpost" href="#FerriteProblems.getpost"><code>FerriteProblems.getpost</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">FerriteProblems.getpost(io::FerriteIO)</code></pre><p>Load the user defined <code>post</code> from the results saved by <code>io</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/KnutAM/FerriteProblems.jl/blob/9770c0c3e4422eef0fe20bf91846445ce5782840/src/IO.jl#L346-L350">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../examples/plasticity/">Plasticity »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Friday 23 December 2022 10:08">Friday 23 December 2022</span>. Using Julia version 1.8.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
